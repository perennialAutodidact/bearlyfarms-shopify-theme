{% style %}
  .social-icon {
    position: relative;
    height: {{ block.settings.size_mobile }}px;
    width: {{ block.settings.size_mobile }}px;
    display: flex;
    z-index: 10;
  }

  @media screen and (min-width: {{ settings.breakpoint_lg }}px){
    .social-icon {
    height: {{ block.settings.size_desktop }}px;
    width: {{ block.settings.size_desktop }}px;
    }
  }

  .social-icon:hover {
    cursor: pointer;
  }

  .social-icon .layer {
    height: 100%;
    width: 100%;
    position: absolute;
  }

  .social-icon .layer:nth-child(1) {
    z-index:11;
  }

  .social-icon .layer:nth-child(1) svg * {
    fill: {{ settings.color_primary_900 }};
  }

  .social-icon .layer:nth-child(2)  {
    z-index: 12;
  }

  .social-icon .layer:nth-child(2) svg * {
    fill: {{ settings.color_primary_500 }};
  }

  .social-icon .layer-3 {
    z-index: 13;
  }

  .social-icon .layer-3 svg * {
      fill: {{ settings.color_light }};
  }
{% endstyle %}

{% assign social_url = block.settings.social_url.url %}
{% comment %} {% assign is_phone = block.settings.social_icon contains 'phone' %} {% endcomment %}
{% comment %} {% assign is_email = block.settings.social_icon contains 'email' %} {% endcomment %}
{% assign icon_filename = block.settings.social_icon | split: '/' | last %}
{% assign social_icon = 'images/icons/' | append: icon_filename | inline_asset_content %}

{% liquid
  if block.settings.social_icon contains 'phone'
    assign href = 'tel:{{shop.phone}}'
  elsif block.settings.social_icon contains 'email'
    assign href = 'mailto:{{shop.email}}'
  else
    assign href = social_url
  endif
%}

<div class="social-icon {{block.settings.social_icon}}">
  {{ icon_filename }}
  {% for i in (1..3) %}
    {% if i == 3 %}
      <a
        href="{{ href}}"
        rel="noreferrer"
        target="_blank"
        class="layer layer-{{i}} {% if i < 3 %} hidden_mobile {% endif %}"
      >
        {{ social_icon }}
      </a>

    {% else %}
      <span class="layer layer-{{i}}">
        {{ social_icon }}
      </span>
    {% endif %}
  {% endfor %}
</div>

{% schema %}
{
  "name": "Social Icon",
  "settings": [
    {
      "type": "image_picker",
      "id": "social_icon",
      "label": "Social Icon"
    },
    {
      "type": "url",
      "id": "social_url",
      "label": "Social URL"
    },
    {
      "type": "select",
      "id": "size_desktop",
      "label": "Size (Desktop)",
      "default": "50",
      "options": [
        { "label": "Small", "value": "30" },
        { "label": "Large", "value": "50" }
      ]
    },
    {
      "type": "select",
      "id": "size_mobile",
      "label": "Size (Mobile)",
      "default": "30",
      "options": [
        { "label": "Small", "value": "30" },
        { "label": "Large", "value": "50" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Social Icon"
    }
  ]
}
{% endschema %}
